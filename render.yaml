services:
  - type: web
    name: Gesture-Control-backend
    env: node
    region: oregon
    plan: free
    rootDir: .
    buildCommand: |
      pip install --upgrade pip && \
      pip install --no-cache-dir -r server/ml/requirements.txt && \
      npm ci --include=dev && \
      npm run build:server
    startCommand: >
      node --enable-source-maps --experimental-specifier-resolution=node dist/server/index.js
    envVars:
      - key: NODE_VERSION
        value: 20.18.0
      - key: PYTHON_VERSION
        value: 3.10.13
      - key: PY_WORKER_ENABLED
        value: true
      - key: PYTHON_BIN
        value: python3
      # 可选：如果后端代码读取模型路径
      - key: MODEL_PATH
        value: server/ml/asl_knn_model.pkl
