# 🚀 启动和测试指南

## ✅ 环境检查完成

我已经帮你检查了系统环境，所有必要组件都已准备就绪：

### Python环境 ✅
- Python 3.11.9
- mediapipe 0.10.21
- opencv-python 4.11.0
- numpy 1.26.4
- joblib 1.5.2
- scikit-learn 1.7.2
- pandas 2.2.3

### Node.js依赖 ✅
- node_modules已安装
- python-shell包已安装

### AI模型 ✅
- asl_knn_model.pkl 已存在
- Python脚本测试通过

---

## 🎯 启动步骤

### 方法1：使用一键启动脚本（推荐）

1. **双击运行** `RUN_SERVER.bat`
2. **等待服务器启动**（约5-10秒）
3. **打开浏览器** 访问 http://localhost:4000

### 方法2：手动启动

1. 打开命令行（PowerShell或CMD）
2. 进入项目目录：
   ```bash
   cd C:\Users\kerzh\Downloads\GestureWorkshop\GestureWorkshop
   ```
3. 启动后端服务：
   ```bash
   npm run backend
   ```
4. 等待看到以下消息：
   ```
   ✅ Python手势识别服务（带评分系统）已启动
   serving on port 4000
   ```
5. 打开浏览器访问 http://localhost:4000

---

## 🧪 测试步骤

### 1. 访问WebCam页面

打开浏览器后，点击顶部导航栏的 **"Webcam"** 链接

### 2. 启动相机

点击 **"启动相机"** 按钮
- 浏览器会请求摄像头权限，请点击"允许"
- 摄像头画面应该出现
- 左上角应显示 **"实时"** 绿色标记

### 3. 检查连接状态

在相机下方的控制面板，查看**识别状态**部分：
- 应该显示 **✅ 已连接** （绿色徽章）
- 如果显示 **🔄 连接中...**，说明WebSocket还未建立连接

### 4. 开始手势识别

1. 在"选择练习手势"下，点击任意手势按钮（A、B、C、D、E）
2. "识别状态"应变为 **🧠 AI识别中**
3. 对着摄像头做出手语手势
4. 应该在视频右上角看到识别结果：
   - 手势名称（如 "A"）
   - 置信度百分比
   - 评分等级（A/B/C/D）
   - 评价描述

---

## 🔍 问题排查

### 问题1：WebSocket显示"连接中..."不变

**可能原因：** Python进程启动失败

**解决方法：**
1. 检查后端控制台输出，查找错误信息
2. 确认看到以下消息：
   ```
   ✅ Python手势识别服务（带评分系统）已启动
   🐍 ✅ 带打分系统的手势识别服务已启动
   ```
3. 如果没有看到，说明Python进程有问题
4. 运行 `python test_python_script.py` 检查Python环境

### 问题2：相机无法启动

**可能原因：** 浏览器权限或摄像头被占用

**解决方法：**
1. 确保允许浏览器访问摄像头
2. 关闭其他占用摄像头的程序（如Zoom、Teams等）
3. 尝试刷新页面
4. 尝试使用Chrome或Edge浏览器

### 问题3：识别没有反馈

**可能原因：** Python脚本处理帧失败

**解决方法：**
1. 检查后端控制台是否有Python错误
2. 确保手部完整在摄像头视野内
3. 光线要充足
4. 尝试不同的手势

### 问题4：后端启动报错

**可能原因：** 端口被占用或依赖问题

**解决方法：**
1. 确保端口4000没有被其他程序占用
2. 运行 `npm install` 确保所有依赖已安装
3. 检查Python依赖：运行 `检查Python依赖.bat`

---

## 📊 预期行为

### 成功的系统运行应该是这样的：

1. **启动后端**
   ```
   🔗 新的手势识别客户端连接: client_xxx
   🐍 正在启动Python脚本: C:\...\realtime_recognition_with_scoring.py
   ✅ Python手势识别服务（带评分系统）已启动
   🐍 ✅ 带打分系统的手势识别服务已启动
   serving on port 4000
   ```

2. **打开浏览器并启动相机**
   - 看到摄像头画面
   - 连接状态：✅ 已连接

3. **选择手势并开始识别**
   - AI识别状态：🧠 AI识别中
   - 目标手势显示在视频左下角
   - 做手势后，右上角显示识别结果

4. **识别结果示例**
   ```
   手势: A
   评分: B (良好)
   置信度: 85%
   ```

---

## 💡 优化建议

### 获得更好的识别效果：

1. **光线**：确保光线充足且均匀
2. **背景**：使用纯色背景效果更好
3. **手部位置**：将手部完整置于摄像头中央
4. **手势标准**：参考标准ASL字母手语图片
5. **距离**：保持手部距离摄像头约30-50cm

---

## 🎓 系统架构

```
浏览器 (localhost:4000)
    ↓ WebSocket (/ws/gesture)
Node.js后端 (websocket_service.ts)
    ↓ PythonShell进程
Python AI服务 (realtime_recognition_with_scoring.py)
    ↓ MediaPipe手部追踪
    ↓ KNN模型识别
AI模型 (asl_knn_model.pkl)
```

---

## 📝 下一步

现在请按以下步骤测试：

1. ✅ 双击运行 `RUN_SERVER.bat`
2. ✅ 等待服务器完全启动（看到"serving on port 4000"）
3. ✅ 打开浏览器访问 http://localhost:4000
4. ✅ 点击"Webcam"菜单
5. ✅ 点击"启动相机"
6. ✅ 检查连接状态是否为"✅ 已连接"
7. ✅ 点击手势按钮（A-E）
8. ✅ 对着摄像头做手势
9. ✅ 查看识别结果！

---

**如果遇到任何问题，请截图控制台输出和浏览器错误信息，我会帮你解决！** 🚀

